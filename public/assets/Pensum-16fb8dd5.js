import{U as Q,l as K,A as H,V as I,q as J,b as O,s as z,g as W,e as X,x as Y,c as Z,v as ee,_ as se,y as te,h as ae,N as oe}from"./bootstrap-vue-3.es-8d0c5b78.js";import{d as E,r as x,bP as ne,af as F,o as G,c as h,e as N,g as t,f as e,w as s,ab as le,q as p,t as g,G as U,i as a,v as R,h as re,bQ as ce,N as ie,ag as de,U as D,a5 as ue,C as _e}from"./index-011ca880.js";import{L as pe}from"./List-e92cc9b9.js";const me={class:"row"},be={class:"col-5 offset-7"},fe={class:"row"},ve={class:"col-12 mt-2"},ye=E({__name:"TableAsesoria",props:{estado:null,per_page:null},emits:["viewPensum","aprobarAsesoria"],setup(C,{expose:k,emit:i}){const u=C,r=x(""),v=[{key:"id",label:"#"},{key:"carnet",label:"Carnet"},{key:"nombres",label:"Nombres y apellidos"},{key:"pensum",label:"Apellido"},{key:"carrera",label:"Carrera"},{key:"actions",label:""}],d=ne(),{paginate:c,results:m}=F(d),b=x(!1),_=(n,l)=>{n.preventDefault(),w({page:l})},y=()=>{w({q:r.value})},o=({item:n})=>{const{id:l}=n;i("aprobarAsesoria",l)},P=({item:n})=>{const{carnet:l}=n;i("viewPensum",l)},w=async(n={})=>{b.value=!0;const l={q:n.q||"",page:n.page||1,estado:n.estado||u.estado,per_page:n.per_page||u.per_page};await d.getPaginate(l),b.value=!1};return k({refresh:(n={})=>{w(n)}}),G(()=>{w()}),(n,l)=>{const B=Q,A=K,S=H,q=I,V=J,$=O,L=z,M=W;return h(),N(R,null,[t("div",me,[t("div",be,[e(V,{label:"","label-for":"filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm",class:"mb-0"},{default:s(()=>[e(q,null,{default:s(()=>[e(B,{id:"filter-input",modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=f=>r.value=f),type:"search",onKeyup:le(y,["enter"]),placeholder:"Buscar por carnet, nombre o apellido"},null,8,["modelValue","onKeyup"]),e(S,null,{default:s(()=>[e(A,{variant:"primary",onClick:y},{default:s(()=>[p("Buscar")]),_:1})]),_:1})]),_:1})]),_:1})])]),e(L,{fields:v,"show-empty":"",ref:"table",id:"my-table",items:a(m),responsive:"sm",busy:b.value},{empty:s(()=>[e($,{show:"",variant:"info"},{default:s(()=>[p("Por el momento no tenemos registro para mostrar")]),_:1})]),"cell(id)":s(({index:f})=>[p(g(f+1),1)]),"cell(actions)":s(f=>[u.estado==="9"?(h(),U(A,{key:0,variant:"primary",onClick:j=>P(f)},{default:s(()=>[p("Ver pensum")]),_:2},1032,["onClick"])):(h(),U(A,{key:1,variant:"primary",onClick:j=>o(f)},{default:s(()=>[p("Aprobar")]),_:2},1032,["onClick"]))]),_:1},8,["items","busy"]),t("div",fe,[t("div",ve,[e(M,{modelValue:a(c).page,"onUpdate:modelValue":l[1]||(l[1]=f=>a(c).page=f),"total-rows":a(c).total,"per-page":a(c).per_page,"aria-controls":"my-table",onPageClick:_},null,8,["modelValue","total-rows","per-page"])])])],64)}}}),ge={class:"d-flex"},he={class:"flex-grow-1 ms-3"},ke=t("br",null,null,-1),we=t("strong",null,"Materias solicitadas",-1),Ve={class:"row my-3"},Ae={class:"col-12 d-flex justify-content-between"},Ce=E({__name:"TableAsesoria",props:{pensum:null},emits:["validar"],setup(C,{emit:k}){const i=C,u=[{key:"materia_codigo",align:"center",label:"Codigo",sortable:!1},{key:"materia_nombre",label:"Nombre de la materia",sortable:!1},{key:"docente",label:"Nombrel docente",sortable:!1}],{pensum:r}=re(i),v=d=>{k("validar",{status:d,id:i.pensum.aseroria.id})};return(d,c)=>{const m=z,b=K;return h(),N(R,null,[e(m,{fields:u,items:a(r).asesoria_detalle,class:"b-table asesoria",bordered:"","caption-top":""},{"table-caption":s(()=>{var _,y,o;return[t("div",ge,[t("div",he,[t("p",null,[t("h4",null,g((_=a(r).student)==null?void 0:_.nombres)+" "+g((y=a(r).student)==null?void 0:y.apellidos),1),p(" Carnet: "+g((o=a(r).student)==null?void 0:o.carnet)+" ",1),ke,t("p",null,"carrera: pensum: "+g(a(r).carrera.nombre),1)]),we])])]}),"cell(docente)":s(({item:_})=>[p(g(_.docente_nombres)+" "+g(_.docente_apellidos),1)]),_:1},8,["items"]),t("div",Ve,[t("div",Ae,[e(b,{variant:"primary",onClick:c[0]||(c[0]=()=>v("008"))},{default:s(()=>[p("Validar")]),_:1}),e(b,{variant:"danger",onClick:c[1]||(c[1]=()=>v("004"))},{default:s(()=>[p("Denegar")]),_:1})])])],64)}}}),Pe={class:"file-content"},$e={class:"container-fluid"},xe={class:"row py-5"},Ne={class:"col-5"},Be={key:0,class:"card"},Se={class:"col-7"},Re=E({__name:"Pensum",setup(C){const k=_e(),i=ce(),{open:u,pensumEnrolled:r,pensumEnrolledGenerate:v}=F(i),d=()=>{var o;m.value=k.name==="pensum-asesor"?"9":"10",(o=c.value)==null||o.refresh({estado:m.value})};ie(()=>k.name,()=>d());const c=x(null),m=x(null);G(()=>{d()});const b=async o=>{i.getPensumAsesoriaStudent(o)},_=o=>{i.updateStatusEnrolled(o.id,{estado:o.status}).then(()=>{d()})},y=o=>{i.updateStatusEnrolled(o,{estado:"009"}).then(()=>{d()})};return(o,P)=>{const w=X,T=Y,n=Z,l=ee,B=se,A=te,S=ae,q=oe;return h(),N(R,null,[e(de,{title:"Asesoria",main:"Pensum",button:!0}),t("div",Pe,[e(l,{"no-body":""},{default:s(()=>[e(S,{class:"tabs-student",card:""},{default:s(()=>[e(A,{title:"Asesoria"},{default:s(()=>[e(B,null,{default:s(()=>[e(l,{"no-body":""},{default:s(()=>[e(n,null,{default:s(()=>[e(T,null,{default:s(()=>[e(w,{cols:"12"},{default:s(()=>[m.value?(h(),U(ye,{key:0,ref_key:"table",ref:c,per_page:5,estado:m.value,onAprobarAsesoria:y,onViewPensum:b},null,8,["estado"])):D("",!0)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),e(q,{"hide-footer":"",modelValue:a(u),"onUpdate:modelValue":P[0]||(P[0]=V=>ue(u)?u.value=V:null),"no-close-on-esc":"","no-close-on-backdrop":"",size:"xll",scrollable:""},{default:s(()=>{var V,$;return[t("div",$e,[t("div",xe,[t("div",Ne,[(V=a(r))!=null&&V.asesoria_detalle&&(($=a(r))!=null&&$.student)?(h(),N("div",Be,[e(Ce,{pensum:a(r),onValidar:_},null,8,["pensum"])])):D("",!0)]),t("div",Se,[e(pe,{keys:a(v).keys,items:a(v).items},null,8,["keys","items"])])])])]}),_:1},8,["modelValue"])],64)}}});export{Re as default};
